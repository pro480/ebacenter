(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[821],{14:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data/gallery",function(){return n(6566)}])},6566:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var r=n(5893),s=n(7294),i=n(3276),l=n(7920),c=n(1799),o=n(645),a=n(1446),d=n(1038),u=n(3045);function x(){var e=(0,s.useContext)(I),t=e.setIsEditing,n=e.isEditing,i=e.setSelectedCard;return(0,r.jsx)("button",{className:"hidden h-full w-16 items-center justify-center border bg-PRIMARY_COLOR-100 md:flex",onClick:function(){t((function(e){return!e})),n&&i(null)},children:n?"\ucde8\uc18c":"\ucd94\uac00"})}function m(e){var t=e.data,n=e.docID,i=(0,s.useContext)(I),l=i.setIsEditing,o=i.setSelectedDocId,a=i.setSelectedCard;return(0,r.jsx)("button",{className:"h-full",onClick:function(){l(!1),a((0,c.Z)({},t)),o(n),l(!0)},children:"\uc218\uc815"})}function R(e){var t=e.docID,n=(0,s.useContext)(I).deleteDocument;return(0,r.jsx)("button",{onClick:function(){return n(t)},children:"\uc0ad\uc81c"})}function h(){var e=(0,s.useContext)(I),t=e.setIsEditing,n=e.setSelectedCard,i=e.setSelectedIndex;return(0,r.jsx)("button",{className:"mr-5 w-fit cursor-pointer self-center border bg-PRIMARY_COLOR-50 px-6 py-1",onClick:function(){t(!1),n(null),i(0)},children:"\ucde8\uc18c"})}function f(){var e=(0,s.useContext)(I),t=e.pageNumber,n=e.setPageNumber,i=e.galleryList,l=Math.floor(Number(null===i||void 0===i?void 0:i.length)/9)+1,c=5*Math.floor(l/5)+1,x=5*Math.floor((Number(t)-1)/5)+1;return(0,r.jsx)("div",{className:" m-5 flex items-center justify-center pt-20",children:(0,r.jsxs)("ul",{className:"inline-flex items-center -space-x-px ",children:[(0,r.jsx)("li",{children:(0,r.jsx)("button",{className:"m-1 border border-PRIMARY_COLOR-500 bg-white py-3 px-2 text-sm text-PRIMARY_COLOR-500 hover:border-PRIMARY_COLOR-500 hover:bg-GRAY_COLOR-500 hover:text-PRIMARY_COLOR-500",onClick:function(){n(1)},children:(0,r.jsx)(o.Z,{className:"h-3 w-3"})})}),(0,r.jsx)("li",{children:(0,r.jsx)("button",{className:"m-1 border border-PRIMARY_COLOR-500 bg-white py-3 px-2 text-sm text-PRIMARY_COLOR-500 hover:border-PRIMARY_COLOR-500 hover:bg-GRAY_COLOR-500 hover:text-PRIMARY_COLOR-500",onClick:function(){1==x?x=1:x-=5,n(x)},children:(0,r.jsx)(a.Z,{className:"h-3 w-3"})})}),(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:function(){n(x)},children:t==x?(0,r.jsx)("span",{className:"m-1 border border-PRIMARY_COLOR-500 bg-GRAY_COLOR-500 py-2 px-3 text-sm text-PRIMARY_COLOR-500",children:x}):(0,r.jsx)("span",{className:"m-1 border border-PRIMARY_COLOR-500 bg-white py-2 px-3 text-sm text-PRIMARY_COLOR-500 hover:bg-GRAY_COLOR-500",children:x})})}),x+1<=l&&(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:function(){n(x+1)},children:t==x+1?(0,r.jsx)("span",{className:"m-1 border border-PRIMARY_COLOR-500 bg-GRAY_COLOR-500 py-2 px-3 text-sm text-PRIMARY_COLOR-500",children:x+1}):(0,r.jsx)("span",{className:"m-1 border border-PRIMARY_COLOR-500 bg-white py-2 px-3 text-sm text-PRIMARY_COLOR-500 hover:bg-GRAY_COLOR-500",children:x+1})})}),x+2<=l&&(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:function(){n(x+2)},children:t==x+2?(0,r.jsx)("span",{className:"m-1 border border-PRIMARY_COLOR-500 bg-GRAY_COLOR-500 py-2 px-3 text-sm text-PRIMARY_COLOR-500",children:x+2}):(0,r.jsx)("span",{className:"m-1 border border-PRIMARY_COLOR-500 bg-white py-2 px-3 text-sm text-PRIMARY_COLOR-500 hover:bg-GRAY_COLOR-500",children:x+2})})}),x+3<=l&&(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:function(){n(x+3)},children:t==x+3?(0,r.jsx)("span",{className:"m-1 border border-PRIMARY_COLOR-500 bg-GRAY_COLOR-500 py-2 px-3 text-sm text-PRIMARY_COLOR-500",children:x+3}):(0,r.jsx)("span",{className:"m-1 border border-PRIMARY_COLOR-500 bg-white py-2 px-3 text-sm text-PRIMARY_COLOR-500 hover:bg-GRAY_COLOR-500",children:x+3})})}),x+4<=l&&(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:function(){n(x+4)},children:t==x+4?(0,r.jsx)("span",{className:"m-1 border border-PRIMARY_COLOR-500 bg-GRAY_COLOR-500 py-2 px-3 text-sm text-PRIMARY_COLOR-500",children:x+4}):(0,r.jsx)("span",{className:"m-1 border border-PRIMARY_COLOR-500 bg-white py-2 px-3 text-sm text-PRIMARY_COLOR-500 hover:bg-GRAY_COLOR-500",children:x+4})})}),(0,r.jsx)("li",{children:(0,r.jsx)("button",{className:"m-1 border border-PRIMARY_COLOR-500 bg-white py-3 px-2 text-sm text-PRIMARY_COLOR-500 hover:border-PRIMARY_COLOR-500 hover:bg-GRAY_COLOR-500 hover:text-PRIMARY_COLOR-500",onClick:function(){x<c?x+=5:x=c,n(x)},children:(0,r.jsx)(d.Z,{className:"h-3 w-3"})})}),(0,r.jsx)("li",{children:(0,r.jsx)("button",{className:"m-1 border border-PRIMARY_COLOR-500 bg-white py-3 px-2 text-sm text-PRIMARY_COLOR-500 hover:border-PRIMARY_COLOR-500 hover:bg-GRAY_COLOR-500 hover:text-PRIMARY_COLOR-500",onClick:function(){x=c,n(l)},children:(0,r.jsx)(u.Z,{className:"h-3 w-3"})})})]})})}var b=n(7536),g=n(4500),O=n(1294),p=n(4219),j=n(774),v=n(5675),C=n.n(v),_=n(381),L=n.n(_);var A=function(e){var t=e.card,n=L()(),i=(0,s.useContext)(I),l=i.collectionRef,o=i.selectedDocId,a=i.selectedCard,d=i.setIsEditing,u=(0,g.b)(l),x=(0,g.AG)((0,O.JU)((0,O.hJ)(p.db,"\uac24\ub7ec\ub9ac \ub370\uc774\ud130"),"".concat(o)),{merge:!0}),m=(0,s.useState)(!1),R=m[0],f=m[1],v=(0,b.cI)({defaultValues:(0,s.useMemo)((function(){if(a)return a}),[a])}),_=v.register,A=v.handleSubmit,w=v.reset;return(0,s.useEffect)((function(){a&&w(a)}),[a]),(0,r.jsxs)("form",{className:"relative flex w-full items-center justify-start border-b border-gray-200 bg-GRAY_COLOR-200 ",onSubmit:A(a?function(e){if(R){var n=e.imgFile[0],r=(0,j.iH)(p.tO,"images/gallery/"+n.name),s=(0,j.B0)(r,n);s.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(function(e){switch(e.code){case"storage/unauthorized":case"storage/canceled":case"storage/unknown":console.log(e)}}),(function(){(0,j.Jt)(s.snapshot.ref).then((function(n){x.mutate({title:e.title,isBanner:e.isBanner,imgUrl:n,card:t})})),d(!1)}))}else x.mutate({title:e.title,isBanner:e.isBanner});d(!1)}:function(e){var r=e.imgFile[0],s=(0,j.iH)(p.tO,"images/gallery/"+r.name),i=(0,j.B0)(s,r);i.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(function(e){switch(e.code){case"storage/unauthorized":case"storage/canceled":case"storage/unknown":console.log(e)}}),(function(){(0,j.Jt)(i.snapshot.ref).then((function(r){u.mutate({title:e.title,isBanner:e.isBanner,createdAt:n.format("YYYYMMDDHHmmss"),imgUrl:r,card:t})})),d(!1)}))}),children:[a&&!R?(0,r.jsxs)("div",{className:"relative flex h-52 flex-col items-end border p-2 md:w-1/3 lg:w-1/2",children:[(0,r.jsx)(C(),{src:a.imgUrl,layout:"fill",objectFit:"contain"}),(0,r.jsx)("button",{className:"absolute right-2 bottom-2 z-50 border bg-GRAY_COLOR-600 text-sm",onClick:function(){return f(!0)},children:"\uc774\ubbf8\uc9c0 \uc218\uc815"})]}):(0,r.jsx)("div",{className:"h-52 w-1/4 flex-col border p-2",children:(0,r.jsxs)("label",{children:["\uc774\ubbf8\uc9c0 \ud30c\uc77c\uba85\uc744 \uc5c5\ub85c\ub4dc \ub0a0\uc9dc\ub85c \ubc14\uafd4\uc11c \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694",(0,r.jsx)("input",(0,c.Z)({type:"file"},_("imgFile",{required:!0})))]})}),(0,r.jsx)("div",{className:"w-3/4",children:(0,r.jsx)("div",{className:"flex justify-center md:mr-32",children:(0,r.jsxs)("label",{className:"flex flex-col items-center space-y-3",children:[(0,r.jsxs)("div",{className:"space-x-4",children:[(0,r.jsx)("a",{children:"\uc81c\ubaa9 :"}),(0,r.jsx)("input",(0,c.Z)({placeholder:"\uc0ac\uc9c4\uc758 \uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694"},_("title",{required:!0})))]}),(0,r.jsxs)("label",{className:"flex space-x-2",children:[(0,r.jsx)("a",{children:"\uba54\uc778\ud398\uc774\uc9c0 \ubc30\ub108"}),(0,r.jsx)("input",(0,c.Z)({type:"checkbox",defaultChecked:!1},_("isBanner")))]})]})})}),(0,r.jsxs)("div",{className:"absolute bottom-3 right-1",children:[(0,r.jsx)("input",{className:"mr-5 w-fit cursor-pointer self-center border bg-PRIMARY_COLOR-50 px-6 py-1",type:"submit",value:a?"\ud3b8\uc9d1":"\ucd94\uac00"}),(0,r.jsx)(h,{})]})]})};var w=function(e){e.card;var t=e.galleryList,n=(0,i.Z)().user,l=(0,s.useContext)(I).pageNumber;return(0,r.jsx)("div",{children:(0,r.jsx)("main",{className:"grid grid-cols-1 items-center gap-y-16 gap-x-14 self-center md:grid-cols-2 xl:grid-cols-3",children:null===t||void 0===t?void 0:t.sort((function(e,t){return Number(t.data().createdAt)-Number(e.data().createdAt)})).slice(9*(Number(l)-1),9*(Number(l)-1)+9).map((function(e,t){var s=e.data(),i=s.createdAt.slice(0,4),l=s.createdAt.slice(4,6),c=s.createdAt.slice(6,8);return(0,r.jsxs)("div",{className:"mx-auto flex h-64 w-80 flex-col items-center justify-end lg:h-72 lg:w-80",children:[(0,r.jsx)("div",{className:"relative h-[70%] w-full",children:(0,r.jsx)(C(),{src:s.imgUrl,alt:"\uac8c\uc2dc\ubb3c \uc774\ubbf8\uc9c0",layout:"fill",objectFit:"contain",priority:!0})}),(0,r.jsxs)("div",{className:"flex flex-col ",children:[(0,r.jsx)("div",{className:"text-center font-bold",children:s.title}),(0,r.jsx)("div",{className:"text-center",children:"".concat(i,"-").concat(l,"-").concat(c)}),n&&(0,r.jsxs)("div",{className:"mt-5 flex space-x-5",children:[(0,r.jsx)(m,{data:s,docID:e.id}),(0,r.jsx)(R,{docID:e.id})]})]})]},e.id)}))})})},I=(0,s.createContext)({});var N=function(e){var t,n=e.card,c=(0,i.Z)().user,o=(0,l.Z)("\uac24\ub7ec\ub9ac \ub370\uc774\ud130",["\uac24\ub7ec\ub9ac \ub370\uc774\ud130"]),a=o.collectionRef,d=o.collectionQuery,u=o.deleteDocument,m=(0,s.useState)(null),R=m[0],h=m[1],b=(0,s.useState)(!1),g=b[0],O=b[1],p=(0,s.useState)(0),j=p[0],v=p[1],C=(0,s.useState)(null===(t=d.data)||void 0===t?void 0:t.docs),_=C[0],L=C[1],N=(0,s.useState)(null),y=N[0],Y=N[1];(0,s.useLayoutEffect)((function(){var e,t=null===(e=d.data)||void 0===e?void 0:e.docs.filter((function(e){return e.data().card===n}));L(t)}),[d.isSuccess]);var M=(0,s.useState)(1),P=M[0],k=M[1],E={isEditing:g,setIsEditing:O,collectionQuery:d,collectionRef:a,deleteDocument:u,selectedDocId:R,setSelectedDocId:h,selectedIndex:j,setSelectedIndex:v,selectedCard:y,setSelectedCard:Y,galleryList:_,pageNumber:P,setPageNumber:k};return d.isLoading?(0,r.jsx)(r.Fragment,{children:"\ub85c\ub529"}):(0,r.jsxs)(I.Provider,{value:E,children:[(0,r.jsxs)("main",{className:"flex w-full flex-col space-y-8",children:[(0,r.jsxs)("h1",{className:"pb-5 pt-4 text-sm md:text-base",children:["\uc804\uccb4"," ",(0,r.jsx)("span",{className:"ml-3 text-lg font-bold text-PRIMARY_COLOR-500 md:text-2xl",children:null===_||void 0===_?void 0:_.length})," ","\uac74"]}),(0,r.jsx)("div",{className:"relative mt-5 flex h-9 items-center justify-end space-x-5",children:c&&(0,r.jsx)(x,{})}),g&&(0,r.jsx)(A,{card:n}),(0,r.jsx)("div",{children:(0,r.jsx)(w,{card:n,galleryList:_})})]}),(0,r.jsx)(f,{})]})},y=n(9518);var Y=function(){return(0,r.jsxs)("div",{children:[(0,r.jsx)(y.Z,{title:"EBA | \uac24\ub7ec\ub9ac",description:"EBA\uc13c\ud130 \uac24\ub7ec\ub9ac\uc785\ub2c8\ub2e4"}),(0,r.jsx)(N,{card:"\uac24\ub7ec\ub9ac \uac8c\uc2dc\ubb3c"})]})}},9518:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(5893),s=n(9008),i=n.n(s),l={src:"/_next/static/media/logo(H)_symbol_text_tag(EN)_w.9d550bfd.svg",height:151,width:888},c=function(e){var t=e.title,n=e.description;return(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:t}),(0,r.jsx)("meta",{name:"description",content:n}),(0,r.jsx)("meta",{property:"og:title",content:t}),(0,r.jsx)("meta",{property:"og:description",content:n}),(0,r.jsx)("meta",{property:"og:image",content:l}),(0,r.jsx)("meta",{name:"keywords",content:"eba, \ube45\ub370\uc774\ud130 \uc5f0\uad6c, bigdata research, \ube45\ub370\uc774\ud130, bigdata, big data, education big data, \uad50\uc721 \ube45\ub370\uc774\ud130"}),(0,r.jsx)("meta",{charSet:"URF-8"}),(0,r.jsx)("meta",{name:"viewport",content:"user-scalable=no, width=device-width"})]})}},7920:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(9815),s=n(1294),i=n(4219),l=n(4500);function c(e,t){var n={toFirestore:function(e){return e},fromFirestore:function(e,t){return e.data(t)}},c=(0,s.hJ)(i.db,e).withConverter(n);return{converter:n,collectionRef:c,collectionQuery:(0,l.sQ)((0,r.Z)(t),c,{subscribe:!0}),deleteDocument:function(t){var n=(0,s.JU)(i.db,e,t);(0,s.oe)(n).then((function(){console.log("\ubb38\uc11c \uc0ad\uc81c!")})).catch((function(e){console.log(e)}))}}}},645:function(e,t,n){"use strict";var r=n(7294);const s=r.forwardRef((function({title:e,titleId:t,...n},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:s,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}));t.Z=s},1446:function(e,t,n){"use strict";var r=n(7294);const s=r.forwardRef((function({title:e,titleId:t,...n},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:s,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}));t.Z=s},1038:function(e,t,n){"use strict";var r=n(7294);const s=r.forwardRef((function({title:e,titleId:t,...n},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:s,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}));t.Z=s},9815:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(943);var s=n(3375);var i=n(1566);function l(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,s.Z)(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(e){e.O(0,[885,715,536,774,888,179],(function(){return t=14,e(e.s=t);var t}));var t=e.O();_N_E=t}]);